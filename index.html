<!--
This code is a sample of how to use the GrpCPURunMins Visualizer
and is released under the Public Domain
-->

<!DOCTYPE html>
<html>
<head>
  <title>SLURM GrpCpuRunMins Simulation</title>
  <link rel="stylesheet" type="text/css" href="simulation.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.6/d3.min.js"></script>
  <meta charset="utf-8" />
  <script>
  // want more comparisons? add more colors to this spot and then make a new css 
  // class with that color (see the inline css in the svg and simulation.css)
  var chart_colors_class = ["blue", "red", "green"];
  var margin = {top: 20, right: 20, bottom: 30, left: 100},
      width = 800 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;
  </script>
  <script src="./graph.js"></script>
  <script src="./simulation.js"></script>
</head>

<body>

<p>
  This graph simulates the interaction of job core counts, job walltimes, and 
the GrpCPURunMins limit.  You can compare up to three different combinations by 
pressing the "+" button.  An explanation is located below the graph.
</p>

<!-- this is a popup that appears when the user hovers over the 
question mark next to the GrpCPURunMins Limit field -->
<div id="GrpCPURunMinsHelp" class="hover_popup">
GrpCPURunMins is a Slurm limit on a user's or account's 
sum(job_core_count * job_remaining_time). Slurm uses cores*minutes. Moab/Maui 
uses cores*seconds in the equivalent MAXPS parameter. Convert between them by 
multiplying or dividing by 60.
<br><br>
This parameter is pre-populated with the GrpCPURunMins limit. Non-admin users 
do *not* need to adjust this number.
</div>

<!-- This is the location that the script will auto populate the GrpCPURunMins limit from -->
<div id="defaultGrpCPURunMins" style="display: none;"></div>

<!-- This is the div the script will fill in with the forms for each graph -->
<div id="formset" class="formset"></div>

<!-- A button that will call saveAsSvg -->
<button id="saveSVG">Download Graph</button>

<!-- The graphing code relies on having a div with an id graph. -->
<div id="graph">
<svg xmlns="http://www.w3.org/2000/svg">
<rect width="100%" height="100%" fill="white"></rect>
<defs><style type="text/css">
<![CDATA[
/* inline these styles so desktop viewers can load the svg */
.line {
  fill: none;
  stroke-width: 2.5px;
}
/* These match up with the javascript array mentioned earlier */
.red {
  stroke: red;
}

.blue {
  stroke: steelblue;
}

.green {
  stroke: green;
}
]]>
</style></defs>
</svg></div>

<!-- simple handler to add a save as svg button -->
<script> 
    d3.select("#saveSVG").on("click", saveAsSvg);
</script>
</body>
</html>
