var Fsl={CpuTimeRemaining:{}};Fsl.CpuTimeRemaining.Job=function(c,b){this.cores=b;this.walltime=c;this.time_to_deduct=b;this.cpu_time=b*c};
Fsl.CpuTimeRemaining.Simulation=function(c,b,d){this.next=function(){var a=this.update_running_jobs_and_sum_time_remaining();this.move_finished_jobs();this.start_new_jobs(a);return{value:this.calculate_cpus_in_use(),done:!this.has_next()}};this.jobs=[];this.job=new Fsl.CpuTimeRemaining.Job(c,b);this.queue_ndx=this.run_ndx=0;this.calculate_number_of_jobs_to_run=function(){return d/(c/2)/b*5};this.update_running_jobs_and_sum_time_remaining=function(){for(var a=0,b=this.run_ndx;b<this.queue_ndx;++b){var c=
Math.max(0,this.jobs[b]-this.job.time_to_deduct);this.jobs[b]=c;a+=c}return a};this.move_finished_jobs=function(){var a;for(a=this.run_ndx;a<this.queue_ndx&&!(0<this.jobs[a]);++a);this.run_ndx=a};this.calculate_time_to_fill_with_new_jobs=function(a){return d-a};this.calculate_jobs_that_fit_in=function(a){return Math.floor(a/this.job.cpu_time)};this.start_n_jobs=function(a){this.queue_ndx+=Math.min(a,this.jobs.length-this.queue_ndx)};this.start_new_jobs=function(a){a=this.calculate_time_to_fill_with_new_jobs(a);
a=this.calculate_jobs_that_fit_in(a);this.start_n_jobs(a)};this.calculate_cpus_in_use=function(){return(this.queue_ndx-this.run_ndx)*this.job.cores};this.has_next=function(){return this.run_ndx<this.jobs.length};for(var e=0;e<this.calculate_number_of_jobs_to_run();++e)this.jobs.push(this.job.cpu_time)};
